<!-- app/templates/dashboard.html -->
{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h1>Welcome, {{ current_user.username }}!</h1>
        <p class="lead">Your Personal Learning & Career Dashboard</p>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h3>Career Goal</h3>
            </div>
            <div class="card-body">
                {% if current_user.career_goal %}
                <p>{{ current_user.career_goal }}</p>
                <a href="{{ url_for('app.career_goal') }}" class="btn btn-sm btn-outline-primary">Update Goal</a>
                {% else %}
                <p>You haven't set a career goal yet.</p>
                <a href="{{ url_for('app.career_goal') }}" class="btn btn-primary">Set Career Goal</a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h3>Your Roadmap</h3>
            </div>
            <div class="card-body">
                {% if roadmap %}
                <p>{{ roadmap.title }}</p>
                <a href="{{ url_for('app.roadmap', roadmap_id=roadmap.id) }}" class="btn btn-primary">View Roadmap</a>
                {% else %}
                <p>You don't have a roadmap yet.</p>
                <a href="{{ url_for('app.career_goal') }}" class="btn btn-primary">Generate Roadmap</a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h3>Quick Actions</h3>
            </div>
            <div class="card-body">
                <a href="{{ url_for('app.add_task') }}" class="btn btn-primary mb-2 d-block">Add New Task</a>
                <a href="#" class="btn btn-outline-secondary mb-2 d-block">View Progress</a>
                <a href="#" class="btn btn-outline-secondary d-block">Take Quiz</a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h3>Today's Tasks</h3>
            </div>
            <div class="card-body">
                {% if tasks %}
                <ul class="list-group">
                    {% for task in tasks %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <h5>{{ task.title }}</h5>
                            <p>{{ task.description }}</p>
                            <small>Due: {{ task.due_date.strftime('%Y-%m-%d') if task.due_date else 'No due date' }}</small>
                        </div>
                        <div>
                            {% if not task.completed %}
                            <a href="{{ url_for('app.complete_task', task_id=task.id) }}" class="btn btn-sm btn-success">Complete</a>
                            {% else %}
                            <span class="badge bg-success">Completed</span>
                            {% endif %}
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p>No tasks yet. <a href="{{ url_for('app.add_task') }}">Add your first task</a>.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h3>Your Progress</h3>
            </div>
            <div class="card-body">
                {% if progress %}
                <ul class="list-group">
                    {% for p in progress %}
                    <li class="list-group-item">
                        <h5>{{ p.skill }}</h5>
                        <div class="progress mb-2">
                            <div class="progress-bar" role="progressbar" style="width: {{ p.level * 10 }}%;" aria-valuenow="{{ p.level * 10 }}" aria-valuemin="0" aria-valuemax="100">{{ p.level }}/10</div>
                        </div>
                        <p>{{ p.notes }}</p>
                        <small>Updated: {{ p.created_at.strftime('%Y-%m-%d') }}</small>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p>No progress tracked yet. Complete tasks to see your progress.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}